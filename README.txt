
	TECS (Release 1.1.0)
		TOPPERS Embedded Component System

TECS は、組込みシステムに適したコンポーネントシステムとして NPO 法人 
TOPPERS プロジェクトの TECS WG (Working Group) により開発されました．
TECS はコンポーネントシステムの仕様に付与された名称です．TECS WG では、
参照実装も同時に行いましたが、この実装を TECS と呼ぶ場合もあります．こ
の README.txt は、参照実装について記したものです．

【利用条件】

TECS 参照実装の利用条件は，各ファイルの先頭に表示されているTOPPERSライ
センスによります．TECS 仕様については TOPPERS ライセンスとは異なるライ
センスにより提供されます．

【質問・バグレポート・意見等の送付先】

TECS をより良いものにするためのご意見等を歓迎します．TECS に関する質問
やバグレポート，ご意見等は，TOPPERSプロジェクトの会員はコンポーネント
仕様 WG メーリングリスト（com-wg@toppers.jp）宛に，その他の方は 
TOPPERS ユーザーズメーリングリスト（users@toppers.jp）宛にお願いします．

TOPPERSユーザーズメーリングリストへの登録方法については，以下のページに
説明があります．

	http://www.toppers.jp/community.html

【準備】

TECS のインタフェースジェネレータ tecsgen を使用するためには、以下のも
のが必要になります．これらは配布パッケージに含まれていません．各自で準
備してください．

1) ruby  … スクリプト言語 (version 1.8.7)
2) racc  … ruby で記述された yacc 風のパーサジェネレータ　(version 1.4.5)

() 内は試験を行ったバージョンです．
cygwin (cygwin1.dll version 1.17.5)で動作確認を行っていますが、Linux,
MacOS X でも動作したことが確認されています．

【使用方法】

TECS を利用するためには以下を行う必要があります．

1) 言語に関する設定

以下の環境変数などにより、言語、文字コードを判定します．これらは、コン
ソールに出力されるエラー、警告メッセージと、入出力ファイルに影響します．
言語に関する設定が誤っている場合、文字化けが生じる可能性があります。
以下の順で評価され、最後に有効であったものが採用されます．

 ・codepage (exerb 版のみ)
 ・LANG 環境変数 (非 exerb 版のみ)
 ・TECSGEN_LANG
 ・TECSGEN_FILE_LANG (ファイルの言語、文字コード)
 ・-k (ファイルの文字コードのみ)

最近では、環境変数 LANG に UTF-8 を指定する方がよい場合が多くなってい
ます．そのような場合に、ファイルの文字コードを EUC とする場合は、以下
のように設定します (例えば .bashrc に記述します) ．

   LANG=ja_JP.UTF-8
   export TECSGEN_FILE_LANG=ja_JP.eucJP     (-k で指定してもよい)

cygwin 環境で exerb 版を使用し、ファイルの文字コードを sjis とする場合
は、環境変数を特に設定する必要がありません．あるいは -k で文字コードを
指定することもできます(TECS パッケージでは、この方法が使用されています)。

現在のバージョンでは、ファイルの文字コードに eucJP を指定しない場合、
プラグインの生成するコメントが文字化けします（コンパイラが、すべてを 1 
バイト文字として扱うのであれば、その状態でコンパイルしても、問題はない
はずです）。

2) 環境変数を設定（b-shell 系）

% source set_env.sh

bash など B shell 系で動作します．C shell 系の場合、set_env.sh の内容
を参考に PATH, RUBYLIB, TECSPATH の設定を行ってください．
set_env.sh のあるディレクトリで実行してください．TOPPERS/ASP のロガー
コンポーネント化では、TOPPERS/ASP の開発環境に設定が含まれますので、不
要です．

3) TECS ジェネレーターの生成、test の実行

% make

ジェネレータとテストコードのメークが実行されます．環境によっては make 
や gcc のバージョンの相違によりテストコードのメークに失敗する可能性が
あります．その場合は TECS ジェネレータは動作するはずです．

V1.1.0 では make は、必ずしも必要ではありません．

4) ジェネレータの使用方法

% tecsgen tecs.cdl

TECS ジェネレータは上記のように cdl ファイルを引数に取ります．
tecsgen を引数無しで実行すると、簡単な引数の説明が表示されます．
